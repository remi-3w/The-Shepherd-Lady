{% extends 'base.html.twig' %}

{% block title %}
Paiement avec Stripe
{% endblock %}

{% block body %}
<div class="row">
  <div class="col-sm-6 m-auto">
    <h1>Payez avec Stripe !</h1>
        <form id="payment-form">
          <div id="card-element" class="card"></div>
          <button id="submit" class="btn btn-success">
            <div class="spinner hidden" id="spinner"></div>
            <span id="button-text">Payez avec votre Carte Bleue</span>
          </button>
          <p id="card-error" role="alert"></p>      
        </form>
  </div>
</div>

{% endblock %}

{% block javascripts %}
{{parent()}} 
  <script src="https://js.stripe.com/v3/"></script> 
  <script defer>
  const clientSecret = '{{ clientSecret }}';
  const stripePublicKey ="pk_test_51JfkseDkQ4vmM9lSkdwnBcrAd8VX3P9s6npBbRZwCS8cM7wiVwA6iL67uPzDKjaBFP8wZT4ji2SMhGO1jrd9GZbR00RR2ZPwjQ"; 
  const redirectAfterSuccesUrl ="{{ url('purchase_payment_success', {'id': purchase.id }) }}"
  </script>
  <script src='/js/payment.js'></script> 
   
{% endblock %}
